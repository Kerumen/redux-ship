// @flow
import 'babel-polyfill';
import * as Ship from 'redux-ship';
import * as Controller from './controller';

it('gets all the star ships', () => {
  const ship = Controller.control({
    type: 'Load',
  });
  const snapshot = [{"type":"Dispatch","action":{"type":"LoadStart"}},{"type":"Effect","effect":{"type":"HttpRequest","url":"http://swapi.co/api/people/10/"},"result":"{\"name\":\"Obi-Wan Kenobi\",\"height\":\"182\",\"mass\":\"77\",\"hair_color\":\"auburn, white\",\"skin_color\":\"fair\",\"eye_color\":\"blue-gray\",\"birth_year\":\"57BBY\",\"gender\":\"male\",\"homeworld\":\"http://swapi.co/api/planets/20/\",\"films\":[\"http://swapi.co/api/films/5/\",\"http://swapi.co/api/films/4/\",\"http://swapi.co/api/films/6/\",\"http://swapi.co/api/films/3/\",\"http://swapi.co/api/films/2/\",\"http://swapi.co/api/films/1/\"],\"species\":[\"http://swapi.co/api/species/1/\"],\"vehicles\":[\"http://swapi.co/api/vehicles/38/\"],\"starships\":[\"http://swapi.co/api/starships/48/\",\"http://swapi.co/api/starships/59/\",\"http://swapi.co/api/starships/64/\",\"http://swapi.co/api/starships/65/\",\"http://swapi.co/api/starships/74/\"],\"created\":\"2014-12-10T16:16:29.192000Z\",\"edited\":\"2014-12-20T21:17:50.325000Z\",\"url\":\"http://swapi.co/api/people/10/\"}"},{"type":"All","snapshots":[[{"type":"Effect","effect":{"type":"HttpRequest","url":"http://swapi.co/api/starships/48/"},"result":"{\"name\":\"Jedi starfighter\",\"model\":\"Delta-7 Aethersprite-class interceptor\",\"manufacturer\":\"Kuat Systems Engineering\",\"cost_in_credits\":\"180000\",\"length\":\"8\",\"max_atmosphering_speed\":\"1150\",\"crew\":\"1\",\"passengers\":\"0\",\"cargo_capacity\":\"60\",\"consumables\":\"7 days\",\"hyperdrive_rating\":\"1.0\",\"MGLT\":\"unknown\",\"starship_class\":\"Starfighter\",\"pilots\":[\"http://swapi.co/api/people/10/\",\"http://swapi.co/api/people/58/\"],\"films\":[\"http://swapi.co/api/films/5/\",\"http://swapi.co/api/films/6/\"],\"created\":\"2014-12-20T17:35:23.906000Z\",\"edited\":\"2014-12-22T17:35:45.147746Z\",\"url\":\"http://swapi.co/api/starships/48/\"}"},{"type":"Return","result":"Jedi starfighter"}],[{"type":"Effect","effect":{"type":"HttpRequest","url":"http://swapi.co/api/starships/59/"},"result":"{\"name\":\"Trade Federation cruiser\",\"model\":\"Providence-class carrier/destroyer\",\"manufacturer\":\"Rendili StarDrive, Free Dac Volunteers Engineering corps.\",\"cost_in_credits\":\"125000000\",\"length\":\"1088\",\"max_atmosphering_speed\":\"1050\",\"crew\":\"600\",\"passengers\":\"48247\",\"cargo_capacity\":\"50000000\",\"consumables\":\"4 years\",\"hyperdrive_rating\":\"1.5\",\"MGLT\":\"unknown\",\"starship_class\":\"capital ship\",\"pilots\":[\"http://swapi.co/api/people/10/\",\"http://swapi.co/api/people/11/\"],\"films\":[\"http://swapi.co/api/films/6/\"],\"created\":\"2014-12-20T19:40:21.902000Z\",\"edited\":\"2014-12-22T17:35:45.195165Z\",\"url\":\"http://swapi.co/api/starships/59/\"}"},{"type":"Return","result":"Trade Federation cruiser"}],[{"type":"Effect","effect":{"type":"HttpRequest","url":"http://swapi.co/api/starships/64/"},"result":"{\"name\":\"Naboo star skiff\",\"model\":\"J-type star skiff\",\"manufacturer\":\"Theed Palace Space Vessel Engineering Corps/Nubia Star Drives, Incorporated\",\"cost_in_credits\":\"unknown\",\"length\":\"29.2\",\"max_atmosphering_speed\":\"1050\",\"crew\":\"3\",\"passengers\":\"3\",\"cargo_capacity\":\"unknown\",\"consumables\":\"unknown\",\"hyperdrive_rating\":\"0.5\",\"MGLT\":\"unknown\",\"starship_class\":\"yacht\",\"pilots\":[\"http://swapi.co/api/people/10/\",\"http://swapi.co/api/people/35/\"],\"films\":[\"http://swapi.co/api/films/6/\"],\"created\":\"2014-12-20T19:55:15.396000Z\",\"edited\":\"2014-12-22T17:35:45.258859Z\",\"url\":\"http://swapi.co/api/starships/64/\"}"},{"type":"Return","result":"Naboo star skiff"}],[{"type":"Effect","effect":{"type":"HttpRequest","url":"http://swapi.co/api/starships/65/"},"result":"{\"name\":\"Jedi Interceptor\",\"model\":\"Eta-2 Actis-class light interceptor\",\"manufacturer\":\"Kuat Systems Engineering\",\"cost_in_credits\":\"320000\",\"length\":\"5.47\",\"max_atmosphering_speed\":\"1500\",\"crew\":\"1\",\"passengers\":\"0\",\"cargo_capacity\":\"60\",\"consumables\":\"2 days\",\"hyperdrive_rating\":\"1.0\",\"MGLT\":\"unknown\",\"starship_class\":\"starfighter\",\"pilots\":[\"http://swapi.co/api/people/10/\",\"http://swapi.co/api/people/11/\"],\"films\":[\"http://swapi.co/api/films/6/\"],\"created\":\"2014-12-20T19:56:57.468000Z\",\"edited\":\"2014-12-22T17:35:45.272349Z\",\"url\":\"http://swapi.co/api/starships/65/\"}"},{"type":"Return","result":"Jedi Interceptor"}],[{"type":"Effect","effect":{"type":"HttpRequest","url":"http://swapi.co/api/starships/74/"},"result":"{\"name\":\"Belbullab-22 starfighter\",\"model\":\"Belbullab-22 starfighter\",\"manufacturer\":\"Feethan Ottraw Scalable Assemblies\",\"cost_in_credits\":\"168000\",\"length\":\"6.71\",\"max_atmosphering_speed\":\"1100\",\"crew\":\"1\",\"passengers\":\"0\",\"cargo_capacity\":\"140\",\"consumables\":\"7 days\",\"hyperdrive_rating\":\"6\",\"MGLT\":\"unknown\",\"starship_class\":\"starfighter\",\"pilots\":[\"http://swapi.co/api/people/10/\",\"http://swapi.co/api/people/79/\"],\"films\":[\"http://swapi.co/api/films/6/\"],\"created\":\"2014-12-20T20:38:05.031000Z\",\"edited\":\"2014-12-22T17:35:45.381900Z\",\"url\":\"http://swapi.co/api/starships/74/\"}"},{"type":"Return","result":"Belbullab-22 starfighter"}]]},{"type":"Dispatch","action":{"type":"LoadSuccess","names":["Jedi starfighter","Trade Federation cruiser","Naboo star skiff","Jedi Interceptor","Belbullab-22 starfighter"]}}];
  expect(Ship.simulate(ship, snapshot).snapshot).toEqual(snapshot);
});
